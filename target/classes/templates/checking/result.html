<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
</head>
<body>


<div id="main"></div>


<script th:inline="javascript" >
    var allInfo=[[${allInfo}]];
    var main =document.getElementById("main");

    for (m=0;m<allInfo.length;m++){
        var s = create(allInfo[m], main);
        check("ch"+s, "div"+s);
    }

    function create(text, main){
        var partsOfText=text.split("___");
        var i=partsOfText[0]; //number of position
        var commonInfo=partsOfText[1]; //common info
        var detailInfo=partsOfText[2]; //detail info
        var ch=document.createElement('input');
        ch.type="checkbox";
        ch.id='ch'+i;
        var label = document.createElement('label');
        label.appendChild(document.createTextNode('показать детально'));
        var detailDiv = createDivWithText(detailInfo);
        detailDiv.id= 'div'+i;
        $('#main').append('<h3>'+partsOfText[0]+'</h3>');
        $('#main').append(partsOfText[1]+'<br>');
        main.appendChild(ch);
        main.appendChild(label);
        main.appendChild(document.createElement('br'));
        main.appendChild(detailDiv);
        $('#main').append('================================================================');
        return i;
    }



    function createDivWithText(text){
        var d = document.createElement('div');
        var p = document.createElement('p');
        var strings = text.split('<br>');
        for (k=0;k<strings.length;k++){
            p.appendChild(document.createTextNode(strings[k]));
            p.appendChild(document.createElement('br'));
        }
        d.appendChild(p);
        return d;
    }

    function check(chid,divid){
        $('#'+divid).hide();
        $('#'+chid).click(function () {
            if ($(this).is(':checked')){
                $('#'+divid).show('slide', {direction: 'left'}, 1400);
            }
            else {
                $('#'+divid).hide('slide', {direction: 'left'}, 1400);
            }
        });
    }




</script>

</body>
</html>